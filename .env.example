# ==================================================
# V3 Trader Environment Configuration
# ==================================================
# Copy to .env.paper or .env.production and fill in values.
# Required vars are uncommented. Optional vars show defaults.

# === Kalshi API (required) ===
KALSHI_API_URL=https://demo-api.kalshi.co/trade-api/v2
KALSHI_WS_URL=wss://demo-api.kalshi.co/trade-api/ws/v2
KALSHI_API_KEY_ID=<your-api-key-id>
KALSHI_PRIVATE_KEY_PATH=<path-to-private-key.pem>
# Or inline: KALSHI_PRIVATE_KEY_CONTENT=<your-rsa-private-key>

# === Environment ===
ENVIRONMENT=paper

# === Database (required) ===
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres
DATABASE_URL_POOLED=postgresql://postgres:postgres@localhost:54322/postgres
SUPABASE_URL=http://localhost:54321
SUPABASE_KEY=<your-supabase-key>
# SUPABASE_ANON_KEY=<fallback-if-no-SUPABASE_KEY>
# SUPABASE_SERVICE_ROLE_KEY=<for-admin-operations>

# === AI / LLM Keys (all required) ===
ANTHROPIC_API_KEY=<your-anthropic-key>
OPENAI_API_KEY=<your-openai-key>
LANGEXTRACT_API_KEY=<your-gemini-key>
# GOOGLE_API_KEY=<fallback-for-LANGEXTRACT_API_KEY>

# === Market Configuration ===
# V3_MARKET_TICKERS=                       # Comma-separated tickers. Empty = lifecycle discovery
# V3_MAX_MARKETS=10                        # Max orderbook subscriptions
# V3_ORDERBOOK_DEPTH=5
# V3_SNAPSHOT_INTERVAL=1.0

# === Trading Client ===
# V3_ENABLE_TRADING_CLIENT=true            # Master switch
# V3_TRADING_MODE=paper                    # paper or production (auto-detected from ENVIRONMENT)
# V3_TRADING_MAX_ORDERS=1000
# V3_TRADING_MAX_POSITION_SIZE=500
# MIN_TRADER_CASH=1000                     # Min balance in cents ($10). 0=disable
# V3_CLEANUP_ON_STARTUP=true              # Cancel orphaned orders on startup (default: true for paper)

# === Position/Order Safety ===
# V3_ALLOW_MULTIPLE_POSITIONS=false        # Testing mode
# V3_ALLOW_MULTIPLE_ORDERS=false           # Testing mode
# V3_ORDER_TTL_ENABLED=true               # Auto-cancel stale resting orders
# V3_ORDER_TTL_SECONDS=90

# === Event Position Tracking ===
# V3_EVENT_TRACKING_ENABLED=true
# V3_EVENT_EXPOSURE_ACTION=alert           # alert or block
# V3_EVENT_LOSS_THRESHOLD=100              # Cents, guaranteed loss threshold
# V3_EVENT_RISK_THRESHOLD=95               # Cents, high risk threshold

# === Lifecycle Discovery ===
# LIFECYCLE_CATEGORIES=politics,economics
# SPORTS_ALLOWED_PREFIXES=KXNFL           # Empty = allow all sports
# LIFECYCLE_MAX_MARKETS=1000
# LIFECYCLE_SYNC_INTERVAL=30

# === API Discovery (REST bootstrap) ===
# API_DISCOVERY_ENABLED=true
# API_DISCOVERY_INTERVAL=300               # 5 min
# API_DISCOVERY_BATCH_SIZE=200
# DISCOVERY_MIN_HOURS_TO_SETTLEMENT=0.5
# DISCOVERY_MAX_DAYS_TO_SETTLEMENT=30

# === Dormant Market Detection ===
# DORMANT_DETECTION_ENABLED=true
# DORMANT_VOLUME_THRESHOLD=0
# DORMANT_GRACE_PERIOD_HOURS=1.0

# === Entity System (Reddit + langextract) ===
# V3_ENTITY_SYSTEM_ENABLED=true            # Master switch (default: true)
# V3_ENTITY_SUBREDDITS=politics,news       # Default: politics,news
REDDIT_CLIENT_ID=<your-reddit-client-id>
REDDIT_CLIENT_SECRET=<your-reddit-client-secret>
# REDDIT_USER_AGENT="kalshiflow:v1.0 (by /u/kalshiflow)"

# === Reddit Historic Agent ===
# V3_REDDIT_HISTORIC_ENABLED=true
# V3_REDDIT_HISTORIC_POSTS_LIMIT=25
# V3_REDDIT_HISTORIC_COMMENTS_PER_POST=20
# V3_REDDIT_HISTORIC_COOLDOWN_HOURS=6.0

# === GDELT News Intelligence ===
# GDELT_ENABLED=true
GDELT_GCP_PROJECT_ID=<your-gcp-project-id>
# GDELT_CACHE_TTL_SECONDS=300.0
# GDELT_MAX_RESULTS=100
# GDELT_DEFAULT_WINDOW_HOURS=4.0
# GDELT_MAX_BYTES_PER_SESSION=524288000    # 500MB BigQuery budget
# GOOGLE_APPLICATION_CREDENTIALS=<path-to-service-account.json>

# === Server ===
# V3_HOST=0.0.0.0
# V3_PORT=8005
# V3_LOG_LEVEL=INFO
# V3_SYNC_DURATION=10.0
# V3_HEALTH_CHECK_INTERVAL=5.0
# V3_ERROR_RECOVERY_DELAY=30.0
# V3_WS_RECONNECT_INTERVAL=5.0
# V3_WS_MAX_RECONNECT_ATTEMPTS=10
# V3_WS_PING_INTERVAL=30.0
