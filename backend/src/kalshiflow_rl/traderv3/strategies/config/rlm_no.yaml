# RLM NO Strategy Configuration
# Reverse Line Movement - Bet NO when YES trades dominate but price drops
#
# Validated edge: +17.38% on 1.7M+ trades across 72k+ unique markets
# Reference: research/strategies/h014_rlm_validation.md

name: rlm_no
enabled: true
display_name: "Reverse Line Movement NO"

# Position limits
# REDUCED 2026-01-07: Investigation showed -$1,531 P&L, 27pp win rate gap vs backtest
# Running at minimal size while monitoring - see research/reports/rlm_first_principles_investigation.md
max_positions: 60          # Maximum concurrent positions
max_exposure_cents: 30000  # Maximum total exposure ($300) - REDUCED from $6,000

# Rate limiting
max_trades_per_minute: 10  # Strategy-specific rate limit

# Strategy-specific parameters
params:
  # Signal thresholds
  yes_threshold: 0.70      # Minimum YES trade ratio to trigger
  min_trades: 25           # Minimum trades before signal valid
  min_price_drop: 5        # Minimum price drop from open (cents)
  min_no_price: 35         # Minimum NO entry price (backtest: <35c has -32% edge)

  # Position sizing - REDUCED to ~$3 per trade
  # Investigation showed 4.9x loss asymmetry - minimize losses while monitoring
  contracts_per_trade: 3   # REDUCED from 50 to ~$3 max exposure per trade

  # Position scaling DISABLED - running minimal size
  # Original tiers based on S-001 validation showed +31.5% edge at 20c+ drops
  # But live trading showed 20c+ tier had WORST performance (52.2% vs 97.3% expected)
  position_scaling:
    enabled: false         # DISABLED - scaling up on "strong signals" was losing more
    base_contracts: 3
    tiers:
      - drop_min: 20  # 20c+ drop -> 1.0x (no scaling)
        multiplier: 1.0
      - drop_min: 10  # 10-20c drop -> 1.0x
        multiplier: 1.0
      - drop_min: 5   # 5-10c drop -> 1.0x
        multiplier: 1.0

  # Entry behavior
  allow_reentry: true      # Allow adding to existing positions
  max_concurrent: 1000     # Max concurrent positions (high to allow trading with existing positions)

  # Orderbook filters (spread tiers)
  tight_spread: 2          # Tight spread threshold (cents)
  normal_spread: 5         # Normal spread threshold (cents)
  max_spread: 10           # Maximum acceptable spread (cents)
  orderbook_timeout: 5.0   # Seconds to wait for orderbook data

  # Dynamic spread limits by price drop (was hardcoded at 3/5/8c)
  # Larger price drops warrant wider spread tolerance due to higher edge
  spread_tiers:
    drop_20_plus: 8        # 20c+ price drop -> allow up to 8c spread
    drop_10_plus: 5        # 10-20c price drop -> allow up to 5c spread
    default: 5             # <10c price drop -> allow up to 5c spread (was 3c)

  # Time filters (match old rlm_service defaults for parity)
  min_hours_to_settlement: 0.5   # Minimum hours until market closes
  max_days_to_settlement: 30     # Maximum days until market closes (was 7, old service used 30)
