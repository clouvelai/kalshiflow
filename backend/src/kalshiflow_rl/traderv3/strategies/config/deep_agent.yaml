# Deep Agent Strategy Configuration
# Self-improving trading agent with observe-act-reflect loop

name: deep_agent
display_name: "Deep Agent (Self-Improving)"
enabled: true

params:
  # Model settings
  model: "claude-sonnet-4-20250514"  # or claude-3-opus-20240229 for better reasoning
  temperature: 0.7
  max_tokens: 2048

  # Loop settings
  cycle_interval_seconds: 180  # How often to run observe-act cycle (3 minutes)
  max_trades_per_cycle: 3     # Max trades per cycle

  # Target events (empty = all available markets with price impact signals)
  target_events: []  # Empty = trade on ANY event with Reddit-derived signals
  # Restricted example: target_events: ["KXPRESNOMD", "KXNEXTSPEAKER"]

  # Signal lifecycle settings
  max_eval_cycles_per_signal: 3  # Max evaluations per signal before auto-expire

  # Safety settings
  max_contracts_per_trade: 500  # Safety cap only; real sizing is $100/event in strategy.md
  min_spread_cents: 3           # Only trade if spread > this
  require_fresh_news: true
  max_news_age_hours: 2.0

  # Reddit monitoring (optional)
  reddit:
    enabled: false  # Set to true if REDDIT_CLIENT_ID and REDDIT_CLIENT_SECRET are set
    subreddits:
      - politics
      - democrats
      - Republican
    keywords:
      - poll
      - polling
      - election
      - nominee
      - primary
      - biden
      - trump
      - harris
      - newsom
      - 2024
      - 2028
    poll_interval_seconds: 30
    min_score: 0

  # Knowledge Base Accumulator
  accumulator_window_seconds: 7200    # 2hr sliding window
  signal_threshold: 0.4               # Min strength to emit signal
  re_emit_threshold: 0.2              # Min strength increase to re-emit
  bypass_threshold_sentiment: 75      # Bypass accumulation for very strong signals
  bypass_threshold_confidence: 0.9

  # Relation Extraction (REL)
  relation_extraction_enabled: true
  relation_extraction_model: "gpt-4o-mini"
  relation_extraction_timeout: 15.0
  relation_max_per_post: 5

  # Reddit Metadata Gating
  reddit_min_score: 5
  reddit_min_comments: 5

  # Comment Listener
  comment_flush_interval_seconds: 60  # Aggregate comments per minute

  # Memory settings (defaults to ./memory)
  # memory_dir: "/path/to/custom/memory"
  memory_files:
    - learnings.md
    - strategy.md
    - mistakes.md
    - patterns.md
