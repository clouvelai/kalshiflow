[build]
builder = "nixpacks"

[deploy]
# Use the Procfile command which Railway will detect
startCommand = "uvicorn kalshiflow.app:app --host 0.0.0.0 --port $PORT"
# Health check endpoint
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
# Graceful shutdown timeout for WebSocket connections
restartPolicyMaxRetries = 3

[environments]
[environments.production]
RAILWAY_ENVIRONMENT_NAME = "production"
# Enable production optimizations
PYTHONUNBUFFERED = "1"
PYTHONDONTWRITEBYTECODE = "1"